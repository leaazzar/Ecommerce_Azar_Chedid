<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sales.routes &#8212; Ecommerce Project 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=12dfc556" />
    <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for Sales.routes</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Blueprint</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">Purchase</span>
<span class="kn">from</span> <span class="nn">db</span> <span class="kn">import</span> <span class="n">db</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.sql</span> <span class="kn">import</span> <span class="n">text</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;sales_service.log&#39;</span><span class="p">,</span>  <span class="c1"># Log file name</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>            <span class="c1"># Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span>  <span class="c1"># Log format</span>
<span class="p">)</span>

<span class="n">sales_bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">&#39;sales_bp&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>

<span class="n">INVENTORY_SERVICE_URL</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;INVENTORY_SERVICE_URL&#39;</span><span class="p">,</span> <span class="s1">&#39;http://ecommerce_azar_chedid-inventory_service-1:5002/api/v1&#39;</span><span class="p">)</span>
<span class="n">CUSTOMERS_SERVICE_URL</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;CUSTOMERS_SERVICE_URL&#39;</span><span class="p">,</span> <span class="s1">&#39;http://ecommerce_azar_chedid-customers_service-1:5001/api/v1&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="health_check">
<a class="viewcode-back" href="../../Sales.html#Sales.routes.health_check">[docs]</a>
<span class="nd">@sales_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/health&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">health_check</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Health check endpoint.</span>

<span class="sd">    This route checks the health of the sales service, including:</span>
<span class="sd">    - Database connectivity.</span>
<span class="sd">    - Health of external services (Inventory Service and Customer Service).</span>

<span class="sd">    :return: JSON object indicating the health status of the database and external services.</span>
<span class="sd">    :rtype: flask.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check database connection</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;SELECT 1&#39;</span><span class="p">))</span>
        <span class="n">database_status</span> <span class="o">=</span> <span class="s2">&quot;Healthy&quot;</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">database_status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Unhealthy: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Check external services (Example: Inventory Service and Customer Service)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">inventory_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INVENTORY_SERVICE_URL</span><span class="si">}</span><span class="s1">/health&#39;</span><span class="p">)</span>
        <span class="n">inventory_service_status</span> <span class="o">=</span> <span class="s2">&quot;Healthy&quot;</span> <span class="k">if</span> <span class="n">inventory_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span> <span class="k">else</span> <span class="s2">&quot;Unhealthy&quot;</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">inventory_service_status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Unhealthy: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">customer_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">CUSTOMERS_SERVICE_URL</span><span class="si">}</span><span class="s1">/health&#39;</span><span class="p">)</span>
        <span class="n">customer_service_status</span> <span class="o">=</span> <span class="s2">&quot;Healthy&quot;</span> <span class="k">if</span> <span class="n">customer_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span> <span class="k">else</span> <span class="s2">&quot;Unhealthy&quot;</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">customer_service_status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Unhealthy: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Aggregate results</span>
    <span class="n">overall_status</span> <span class="o">=</span> <span class="s2">&quot;Healthy&quot;</span> <span class="k">if</span> <span class="n">database_status</span> <span class="o">==</span> <span class="s2">&quot;Healthy&quot;</span> <span class="ow">and</span> <span class="n">inventory_service_status</span> <span class="o">==</span> <span class="s2">&quot;Healthy&quot;</span> <span class="ow">and</span> <span class="n">customer_service_status</span> <span class="o">==</span> <span class="s2">&quot;Healthy&quot;</span> <span class="k">else</span> <span class="s2">&quot;Unhealthy&quot;</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="n">database_status</span><span class="p">,</span>
        <span class="s2">&quot;inventory_service&quot;</span><span class="p">:</span> <span class="n">inventory_service_status</span><span class="p">,</span>
        <span class="s2">&quot;customer_service&quot;</span><span class="p">:</span> <span class="n">customer_service_status</span><span class="p">,</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">overall_status</span>
    <span class="p">})</span></div>


<div class="viewcode-block" id="home">
<a class="viewcode-back" href="../../Sales.html#Sales.routes.home">[docs]</a>
<span class="nd">@sales_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Default route.</span>

<span class="sd">    Returns a welcome message for the Sales Service.</span>

<span class="sd">    :return: JSON object with a welcome message.</span>
<span class="sd">    :rtype: flask.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Accessed the home route.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Welcome to the Sales Service!&quot;</span><span class="p">})</span></div>


<div class="viewcode-block" id="get_goods">
<a class="viewcode-back" href="../../Sales.html#Sales.routes.get_goods">[docs]</a>
<span class="nd">@sales_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/goods&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_goods</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve all available goods from the Inventory Service.</span>

<span class="sd">    This route fetches goods with positive stock counts from the Inventory Service.</span>

<span class="sd">    :return: JSON object containing a list of goods or an error message.</span>
<span class="sd">    :rtype: flask.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Fetching goods from the Inventory service.&quot;</span><span class="p">)</span>
        <span class="n">inventory_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INVENTORY_SERVICE_URL</span><span class="si">}</span><span class="s1">/inventory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">inventory_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="n">inventory_data</span> <span class="o">=</span> <span class="n">inventory_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="n">goods_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span> <span class="s1">&#39;price_per_item&#39;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;price_per_item&#39;</span><span class="p">)}</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inventory_data</span> <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;count_in_stock&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">]</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully fetched </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">goods_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> goods.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">goods_list</span><span class="p">),</span> <span class="mi">200</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error fetching goods: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Inventory service is unavailable or timeout occurred.&quot;</span><span class="p">},</span> <span class="mi">503</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;An unexpected error occurred.&quot;</span><span class="p">},</span> <span class="mi">500</span></div>


<div class="viewcode-block" id="get_good_details">
<a class="viewcode-back" href="../../Sales.html#Sales.routes.get_good_details">[docs]</a>
<span class="nd">@sales_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/goods/&lt;string:good_name&gt;&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_good_details</span><span class="p">(</span><span class="n">good_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve details of a specific good from the Inventory Service.</span>

<span class="sd">    :param good_name: Name of the good to fetch details for.</span>
<span class="sd">    :type good_name: str</span>
<span class="sd">    :return: JSON object containing the item&#39;s details or an error message.</span>
<span class="sd">    :rtype: flask.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">inventory_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INVENTORY_SERVICE_URL</span><span class="si">}</span><span class="s1">/inventory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">inventory_response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">inventory_data</span> <span class="o">=</span> <span class="n">inventory_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid response format from Inventory service.&quot;</span><span class="p">},</span> <span class="mi">500</span>

        <span class="n">item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inventory_data</span> <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">good_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Item &#39;</span><span class="si">{</span><span class="n">good_name</span><span class="si">}</span><span class="s2">&#39; not found in inventory.&quot;</span><span class="p">},</span> <span class="mi">404</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">item</span><span class="p">),</span> <span class="mi">200</span>

    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;HTTP error occurred while fetching item details: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">502</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Inventory service is unavailable or timeout occurred.&quot;</span><span class="p">},</span> <span class="mi">503</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span></div>


<div class="viewcode-block" id="create_sale">
<a class="viewcode-back" href="../../Sales.html#Sales.routes.create_sale">[docs]</a>
<span class="nd">@sales_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/sales&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">create_sale</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a sale transaction.</span>

<span class="sd">    This route performs the following operations:</span>
<span class="sd">    - Validates request data.</span>
<span class="sd">    - Deducts the total price from the customer&#39;s wallet.</span>
<span class="sd">    - Updates the inventory count for the sold item.</span>
<span class="sd">    - Records the sale in the database.</span>

<span class="sd">    :request body: JSON object containing:</span>
<span class="sd">        - customer_username (str): Username of the customer (required).</span>
<span class="sd">        - item_name (str): Name of the item to be sold (required).</span>
<span class="sd">        - quantity (int): Quantity of the item to be sold (required).</span>

<span class="sd">    :return: JSON object with the sale confirmation or an error message.</span>
<span class="sd">    :rtype: flask.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Log the incoming request</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received sale request: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Validate required fields</span>
        <span class="n">required_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;customer_username&#39;</span><span class="p">,</span> <span class="s1">&#39;item_name&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing required field: </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2"> is required.&quot;</span><span class="p">},</span> <span class="mi">400</span>

        <span class="n">customer_username</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;customer_username&#39;</span><span class="p">]</span>
        <span class="n">item_name</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;item_name&#39;</span><span class="p">]</span>
        <span class="n">quantity</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span>

        <span class="c1"># Validate quantity</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">quantity</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">quantity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid quantity: </span><span class="si">{</span><span class="n">quantity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Quantity must be a positive integer.&quot;</span><span class="p">},</span> <span class="mi">400</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Non-integer quantity: </span><span class="si">{</span><span class="n">quantity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Quantity must be a valid integer.&quot;</span><span class="p">},</span> <span class="mi">400</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing sale for customer: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2">, item: </span><span class="si">{</span><span class="n">item_name</span><span class="si">}</span><span class="s2">, quantity: </span><span class="si">{</span><span class="n">quantity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Get Customer Details</span>
        <span class="n">customer_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">CUSTOMERS_SERVICE_URL</span><span class="si">}</span><span class="s1">/customers/</span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">customer_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Customer not found: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Customer not found.&quot;</span><span class="p">},</span> <span class="mi">404</span>
        <span class="n">customer_data</span> <span class="o">=</span> <span class="n">customer_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">customer_wallet</span> <span class="o">=</span> <span class="n">customer_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;wallet&#39;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Customer details retrieved: </span><span class="si">{</span><span class="n">customer_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Get Inventory Data</span>
        <span class="n">inventory_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INVENTORY_SERVICE_URL</span><span class="si">}</span><span class="s1">/inventory&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inventory_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to retrieve inventory data.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to retrieve goods from Inventory service.&quot;</span><span class="p">},</span> <span class="mi">500</span>
        <span class="n">inventory_data</span> <span class="o">=</span> <span class="n">inventory_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="n">item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inventory_data</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">item_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Item not found: </span><span class="si">{</span><span class="n">item_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Item not found.&quot;</span><span class="p">},</span> <span class="mi">404</span>

        <span class="n">item_price</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;price_per_item&#39;</span><span class="p">)</span>
        <span class="n">count_in_stock</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;count_in_stock&#39;</span><span class="p">)</span>
        <span class="n">item_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Item details retrieved: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Check stock availability</span>
        <span class="k">if</span> <span class="n">count_in_stock</span> <span class="o">&lt;</span> <span class="n">quantity</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Insufficient stock for item: </span><span class="si">{</span><span class="n">item_name</span><span class="si">}</span><span class="s2"> (Requested: </span><span class="si">{</span><span class="n">quantity</span><span class="si">}</span><span class="s2">, In Stock: </span><span class="si">{</span><span class="n">count_in_stock</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Insufficient stock.&quot;</span><span class="p">},</span> <span class="mi">400</span>

        <span class="c1"># Calculate total price</span>
        <span class="n">total_price</span> <span class="o">=</span> <span class="n">item_price</span> <span class="o">*</span> <span class="n">quantity</span>
        <span class="k">if</span> <span class="n">customer_wallet</span> <span class="o">&lt;</span> <span class="n">total_price</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Insufficient funds for customer: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2"> (Wallet: </span><span class="si">{</span><span class="n">customer_wallet</span><span class="si">}</span><span class="s2">, Total Price: </span><span class="si">{</span><span class="n">total_price</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Insufficient funds in wallet.&quot;</span><span class="p">},</span> <span class="mi">400</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total price calculated: </span><span class="si">{</span><span class="n">total_price</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Deduct Money from Wallet</span>
        <span class="n">deduct_wallet_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">CUSTOMERS_SERVICE_URL</span><span class="si">}</span><span class="s1">/customers/</span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s1">/deduct&#39;</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="n">total_price</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">deduct_wallet_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to deduct amount from customer wallet: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to deduct from customer wallet.&quot;</span><span class="p">},</span> <span class="mi">500</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deducted </span><span class="si">{</span><span class="n">total_price</span><span class="si">}</span><span class="s2"> from customer wallet: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Update Inventory</span>
        <span class="n">new_count</span> <span class="o">=</span> <span class="n">count_in_stock</span> <span class="o">-</span> <span class="n">quantity</span>
        <span class="n">update_inventory_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INVENTORY_SERVICE_URL</span><span class="si">}</span><span class="s1">/inventory/</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count_in_stock&#39;</span><span class="p">:</span> <span class="n">new_count</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">update_inventory_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to update inventory for item: </span><span class="si">{</span><span class="n">item_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Rollback the wallet deduction</span>
            <span class="n">rollback_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">CUSTOMERS_SERVICE_URL</span><span class="si">}</span><span class="s1">/customers/</span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s1">/charge&#39;</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="n">total_price</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">rollback_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Wallet deduction rolled back for customer: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to roll back wallet deduction for customer: </span><span class="si">{</span><span class="n">customer_username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to update item in inventory.&quot;</span><span class="p">},</span> <span class="mi">500</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inventory updated for item: </span><span class="si">{</span><span class="n">item_name</span><span class="si">}</span><span class="s2"> (New Count: </span><span class="si">{</span><span class="n">new_count</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="c1"># Record the Purchase</span>
        <span class="n">purchase</span> <span class="o">=</span> <span class="n">Purchase</span><span class="p">(</span>
            <span class="n">customer_username</span><span class="o">=</span><span class="n">customer_username</span><span class="p">,</span>
            <span class="n">item_name</span><span class="o">=</span><span class="n">item_name</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="n">quantity</span><span class="p">,</span>
            <span class="n">total_price</span><span class="o">=</span><span class="n">total_price</span>
        <span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">purchase</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Purchase recorded: </span><span class="si">{</span><span class="n">purchase</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Purchase successful.&quot;</span><span class="p">,</span> <span class="s2">&quot;purchase_id&quot;</span><span class="p">:</span> <span class="n">purchase</span><span class="o">.</span><span class="n">purchase_id</span><span class="p">},</span> <span class="mi">201</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span></div>

    
<div class="viewcode-block" id="get_purchase_history">
<a class="viewcode-back" href="../../Sales.html#Sales.routes.get_purchase_history">[docs]</a>
<span class="nd">@sales_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/customers/&lt;username&gt;/purchases&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_purchase_history</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve purchase history for a specific customer.</span>

<span class="sd">    Fetches a list of all purchases made by a customer.</span>

<span class="sd">    :param username: Username of the customer.</span>
<span class="sd">    :type username: str</span>
<span class="sd">    :return: JSON object containing the purchase history or an error message.</span>
<span class="sd">    :rtype: flask.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Log the incoming request</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received request to fetch purchase history for customer: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Validate username input</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="n">username</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Customer username is empty or invalid.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Customer username is required and cannot be empty.&quot;</span><span class="p">},</span> <span class="mi">400</span>

        <span class="c1"># Query database for purchases</span>
        <span class="n">purchases</span> <span class="o">=</span> <span class="n">Purchase</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">customer_username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

        <span class="c1"># Log the result of the query</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">purchases</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No purchase history found for customer: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No purchase history found for customer &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">},</span> <span class="mi">200</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">purchases</span><span class="p">)</span><span class="si">}</span><span class="s2"> purchases for customer: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Prepare the list of purchases to return</span>
        <span class="n">purchases_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">purchase</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">purchase</span> <span class="ow">in</span> <span class="n">purchases</span><span class="p">]</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully prepared purchase history for customer: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">purchases_list</span><span class="p">),</span> <span class="mi">200</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid username format for customer: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> | Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid username format.&quot;</span><span class="p">},</span> <span class="mi">400</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Handle unexpected errors and log the exception</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error while fetching purchase history for customer: </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> | Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">},</span> <span class="mi">500</span></div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Ecommerce Project</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Your Name.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
    </div>

    

    
  </body>
</html>